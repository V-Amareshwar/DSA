// // For Detecting the cylce , the question Course Scheduler
// Output :-
// 4
// 3
// 1 0
// 2 1
// 3 2
// No Cycle Detected



import java.util.*;
class Main{
    public static void main(String[] args){
        Scanner sc = new Scanner(System.in);
        int v = sc.nextInt();
        int u = sc.nextInt();
        List<List<Integer>> graph = new ArrayList<>();
        for(int i=0;i<v;i++){
            graph.add(new ArrayList<>());
        }
        for(int i=0;i<u;i++){
            int ver = sc.nextInt();
            int edg = sc.nextInt();
            graph.get(ver).add(edg);
        }
        boolean visited[] = new boolean[v];
        boolean pathvis[] = new boolean[v];
        for(int i=0;i<v;i++){
            if(!visited[i]){
                if(Schedule(graph,visited,pathvis,i)){
                    System.out.println("Cycle Detected");
                    return;
                }
            }
        }
        System.out.println("No Cycle Detected");
    }
    public static boolean Schedule(List<List<Integer>> graph,boolean visited[],boolean pathvis[],int node){
        visited[node] = true;
        pathvis[node] = true;
        for(int neighbour : graph.get(node)){
            if(!visited[neighbour]){
                if(Schedule(graph,visited,pathvis,neighbour)){
                    return true;
                }
            }
            else if(pathvis[neighbour]){
                return true;
            }
        }
        pathvis[node] = false;
        return false;
    }
}